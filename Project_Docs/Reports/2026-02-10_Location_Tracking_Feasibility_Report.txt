[기술 검토 보고서] 실시간 위치 추적 및 비콘/GPS 기반 안전 관제 구현 가능성 분석

1. 개요
   본 문서는 '스마트 건설 안전 시스템'의 핵심 기능인 '실시간 작업자 위치 추적' 및 '위험 지역 진입 알림' 기능을 웹(Web) 환경에서 구현할 때 발생하는 기술적 제약 사항과 이에 대한 해결 방안을 검토한 결과입니다.

2. 기술 검토 내용

   A. BLE 비콘(Beacon) 기반 실내 위치 추적 (POC 테스트 결과 반영)
      - 테스트 장비: 고정형 비콘 (MiniBeacon), Besea 태그, MIDASCON ID 태그 등.
      - 테스트 결과 (iOS nRF Connect 앱):
        1. 비콘 기기 정상 작동 확인: Minor ID (18661, 18662 등) 식별 가능.
        2. 거리별 수신 감도 (RSSI) 패턴 확인:
           - 밀착 시 (0m): -34 dBm (매우 강함)
           - 근거리 (약 2~3m): -50 ~ -60 dBm
           - 원거리 (약 10m): -70 ~ -80 dBm (신호 유효 한계선)
      - 기술적 이슈 및 해결:
        1. iOS 백그라운드 제한: 화면이 꺼지거나 백그라운드 전환 시 스캔이 중단되는 현상 확인 -> Capacitor 앱 빌드 시 'Background Mode' 플러그인 필수 적용.
        2. 스캔 모드 충돌: 'Clone as Advertiser' 기능 활성화 시 앱 충돌(Unknown Error) 발생 -> 순수 'Scanning' 모드로만 운영해야 함.
        3. RSSI 필터링 오설정: 필터 기준값(-59 dBm)으로 인해 10m 이상 거리에서 신호가 사라지는 현상 -> 필터 범위 확장 필요.

   B. GPS 기반 실외 위치 추적 (카카오맵/네이버지도 방식)
      - 현황: 실외 작업자의 위치를 GPS로 추적하여 지도에 표시하는 기능.
      - Web vs App:
        1. 웹: '화면이 켜진 상태'에서만 제한적으로 가능. (비콘 연동 불가)
        2. 앱: '백그라운드'에서도 추적 가능하며, 비콘 스캔 API 접근 가능.

3. [심층 분석] 대형 건물 vs 소규모 현장 GPS 효용성 비교
   
   A. 고층 건물(20층) 현장 (부적합)
      - 문제점: 수직 위치(Z축) 식별 불가능. 1층과 10층의 GPS 좌표가 동일하게 찍혀 구분 불가.
      - 환경적 제약: 두꺼운 콘크리트 코어와 빌딩 숲(Urban Canyon) 효과로 인해 GPS 신호가 끊기거나 수십 미터 튀는 현상(Multi-path) 빈번.
      - 결론: GPS만으로는 관제가 불가능하며, 비콘(Beacon) 또는 기압계 필수.

   B. 중소규모(5~10억) 현장 (적합 - 타겟팅 전략)
      - 대상: 빌라, 소형 상가 등 지하 1~2층, 지상 3~4층 규모.
      - 환경적 이점:
        1. 개방된 구조: 벽체가 얇거나 골조 공사 중에는 GPS 신호가 실내까지 잘 도달함.
        2. 오차 허용: 5~10m 오차가 발생해도 "작업자가 현장 내부에 있는가, 외부에 있는가"를 파악하는 목적으로는 충분함.
      - 차별화 전략: "비콘 설치비 0원". 전용 장비 없이 작업자 스마트폰만으로 즉시 도입 가능한 '가성비 안전 시스템'으로 어필.

   C. 확장성 (Scalability)
      - 본 시스템은 GPS 추적 로직과 비콘 추적 로직이 80% 이상 동일한 구조를 가짐.
      - 1단계(GPS) 개발 완료 후, 데이터 입력 소스(Input Source)만 비콘으로 교체하면 즉시 실내 정밀 추적 시스템으로 확장 가능함.

4. 위치 식별 구조 및 매핑 전략 (Beacon Mapping Strategy)

   A. 문제 상황
      - GPS: 절대 좌표(위도, 경도)를 제공하므로 지도 매핑이 즉시 가능함.
      - 비콘: 상대적 신호(비콘ID, RSSI/거리)만 제공하므로 "이 비콘이 어디에 있는지" 시스템이 알 수 없음.

   B. Zone-Beacon 매핑 구조 (해결 방안)
      - 개념: 물리적 비콘을 논리적 구역(Project Zone)에 할당하는 방식 채택.
      - 데이터 구조: `info_beacons` 테이블의 `zone_id` 필드를 통해 매핑 (예: 비콘#18661 = Zone#1F-A3).
      - 작동 원리:
        1. [관리자]: 최초 설치 시 "18661번 비콘은 1F-A3 구역에 있다"고 시스템에 등록.
        2. [시스템]: 작업자 폰에서 "18661번 비콘 신호 강함" 데이터 수신 -> "작업자가 1F-A3 구역에 진입함"으로 자동 해석.
      - 장점: GPS 좌표를 일일이 찍을 필요 없이, 기존 Grid(Zone) 시스템을 100% 재활용하여 직관적인 구역 관제가 가능함.

5. 종합 결론 및 추진 전략
   
   A. 기술적 한계 요약
      - 웹(Web) 환경: 백그라운드 추적 불가, 비콘 스캔 불가.
      - GPS 한계: 실내/지하/고층 건물에서 무용지물.
      - iOS 테스트 결과: 앱 구현 시 백그라운드 처리 로직 중요성 확인.

   B. 단계적 구축 전략 (Step-by-Step)
      
      [1단계: Web 기반 GPS 프로토타입 (즉시 실행)]
      - 목표: "위치 데이터가 서버로 전송되고 지도에 찍힌다"는 흐름 검증.
      - 타겟: 소규모 현장 및 야외 작업 구간.
      - 로직: GPS 좌표 수신 -> 해당 좌표가 포함된 Zone 식별 -> 위험 알림 발송.
      
      [2단계: Hybrid App 전환 (테스트 기기 확보 후)]
      - 목표: 백그라운드 추적 + 비콘(Beacon) 연동.
      - 내용: 기존 웹 코드를 'Capacitor'로 패키징하여 안드로이드 앱으로 변환.
      - 로직: 비콘 ID 수신 -> 매핑된 Zone 식별 (GPS 로직 대체) -> 위험 알림 발송.

   C. [부록] 보유 장비 현황 및 테스트 결과
      - 테스트 장비: 고정형 비콘 (MiniBeacon), Besea 태그, MIDASCON ID 태그 등.
      - 테스트 결과 (iOS nRF Connect):
        1. 2026-02-10 09:37 기준 테스트: 0m(-34 dBm) -> 7m 이동 시(-70 dBm) -> 복귀(-35 dBm) 패턴 확인.
        2. 장비 상태 양호: 배터리 작동 확인, 신호 주기(Interval) 약 0.5초로 안정적.
        3. 앱 연동 가능성: Capacitor Bluetooth LE 플러그인을 통해 RSSI 값 수집 후 서버 전송 가능한 구조임.

2026. 02. 10.
작성자: Smart Security 개발팀