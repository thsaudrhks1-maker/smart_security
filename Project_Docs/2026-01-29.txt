
=== [14:00] 업데이트 ===

[Daily Log]
1. 지도 시각화 기능 구현 (SafetyMap)
   - Leaflet 라이브러리를 활용해 지도 컴포넌트 구현.
   - 다크 모드에 어울리는 CartoDB Dark Matter 타일맵 적용.
   - 기능 구현:
     a) 내 위치 실시간 트래킹 시뮬레이션 (랜덤 좌표 이동).
     b) 위험 구역(Geofence) 설정 및 반경 표시 (빨간 원).
     c) 위험 구역 진입 시 상단 오버레이 경고 알림 표시.

[Process]
- 현재 단계: 지도 기능 확장
- 핵심 의사결정: 지도 타일맵을 오픈소스인 OpenStreetMap 기반의 CartoDB Dark 버전을 사용하여 별도 API 키 없이 다크모드 지도를 구현함.

[Tech Stack]
- 라이브러리: React-Leaflet, Leaflet

=== [15:35] 개발 환경 개선 ===
1. 통합 실행 스크립트 (dev.ps1) 작성
   - 프론트엔드와 백엔드를 동시에 실행할 수 있는 PowerShell 스크립트 추가.
   - 프로젝트 루트에서 .\dev.ps1 실행 시 각각 새 창에서 서버 구동.

2. 문서화
   - Project_Docs/Dev_Environment_Guide.md 작성: 실행 방법 및 향후 클라우드 터널링 추가 가이드.

=== [17:50] 아키텍처 개편 및 DB/UI 고도화 ===

[Backend Refactoring]
1. 아키텍처 전면 개편 (Modular Monolith & 4-Layer)
   - 구조: Router -> Service -> Repository -> Model 계층 분리.
   - 모듈화: `login`, `company`, `work`, `board`, `safety` 등 기능별 폴더로 분리.
   - `model.py` (Entity 정의)와 `repository.py` (CRUD 쿼리) 역할 분리하여 유지보수성 강화.

2. DB 마이그레이션 (Alembic)
   - 비동기(Async) 지원: FastAPI용 `asyncpg`, Alembic용 `psycopg` 이원화 전략 적용.
   - 스키마 구축: 주요 테이블 생성 완료 (Companies, Workers, DailyJobs, DangerZones, Equipments 등).

[Frontend UI Overhaul]
1. 디자인 테마 변경 (Futuristic Neon)
   - 다크 테마(Deep Navy) + 네온 오렌지/블루 포인트 컬러 적용.
   - Glassmorphism(유리 질감) UI 컴포넌트 구현.

2. 대시보드 레이아웃 개선
   - 4단 Grid Layout (Nav Sidebar | Status | Map | Alerts).
   - 좌측 내비게이션 바 추가 (메뉴 확장성 확보).
   - Mock Data 기반의 시뮬레이션 UI 완성 (위험 구역 파장 효과 등).

=== [20:30] DB 데이터 구축 및 백엔드 안정화 (일일 마무리) ===

[작업 내용]
1. DB 연결 구조 통합 (Centralized Model Registry)
   - 문제: 개별 모델이 분산되어 Alembic 및 Seed 스크립트에서 참조 누락 발생.
   - 해결: `back/database.py` 하단에서 모든 모델을 Import하여 중앙 관리소 역할 부여.

2. 시드 데이터(Seed Data) 구축 및 실행
   - `seeds.py` 개발: 관리자, 근로자, 위험구역, 작업일지, 공지사항 등 풀 세트 데이터 생성.
   - 데이터 무결성 확보: 실행 시 `Truncate` 로직을 먼저 수행하여 중복 에러 없이 깨끗한 상태로 재생성 가능하도록 구현.
   - 모델 불일치 수정: 실제 DB 스키마와 `seeds.py` 간의 필드명 불일치 전수 조사 및 수정 완료.

3. 라이브러리 충돌 해결
   - `passlib`와 최신 `bcrypt` 간의 버전 호환성 문제 발생.
   - `passlib` 의존성을 제거하고, 순수 `bcrypt` 라이브러리를 사용하여 비밀번호 해싱 구현.

[Process Updates]
- 규칙 추가: DB 스키마나 테이블 정보를 참조해야 할 경우, 개별 파일 대신 `back/database.py`를 최우선으로 참조한다.

[Next Steps (익일 계획)]
1. 로그인 기능 개발 (JWT Auth)
   - 백엔드: 로그인 API 구현 및 Role(admin/worker) 반환.
   - 프론트엔드: 로그인 페이지 UI 및 라우터 보호(Route Protection).
2. 실제 데이터 연동
   - 대시보드의 Mock Data를 제거하고, 오늘 생성한 DB 데이터를 API로 호출하여 바인딩.
